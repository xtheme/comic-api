$.extend({toast:function(o){let e=$.extend({type:"success",message:"",title:"系统提示",delay:3e3,debug:!1},o);e.debug&&(console.log("toast debug"),console.log(e)),toastr[e.type](e.message,e.title,{timeOut:e.delay,debug:e.debug})},openImage:function(o){let e=$.extend({title:"",size:"",height:"50vh",image:"",debug:!1},o),t=$("#global-modal");e.debug&&(console.log("openModal settings"),console.log(e),console.log(t)),t.find(".modal-dialog").removeClass("modal-sm modal-lg modal-xl modal-full"),""!=e.size&&t.find(".modal-dialog").addClass("modal-"+e.size),"full"==e.size&&(e.height="80vh"),t.find(".modal-title").html(e.title),t.on("show.bs.modal",(function(){if(e.image){let o=`<div class="loading-area" style="height: ${e.height};">\n                    <div class="loading">\n                        <div class="dot"></div>\n                        <div class="dot"></div>\n                        <div class="dot"></div>\n                        <div class="dot"></div>\n                        <div class="dot"></div>\n                    </div>\n                </div>`;t.find(".modal-body").html(o)}})),t.on("shown.bs.modal",(function(){e.image&&setTimeout((function(){t.find(".modal-body").html(`<img src="${e.image}" style="width: 480px;">`)}),500)})),t.modal("show")},openModal:function(o){let e=$.extend({title:"系统弹窗",size:"",height:"50vh",url:"",debug:!1},o),t=$("#global-modal");e.debug&&(console.log("openModal settings"),console.log(e),console.log(t)),t.find(".modal-dialog").removeClass("modal-sm modal-lg modal-xl modal-full"),""!=e.size&&t.find(".modal-dialog").addClass("modal-"+e.size),"full"==e.size&&(e.height="80vh"),t.find(".modal-title").html(e.title),t.on("show.bs.modal",(function(){if(e.url){let o=`<div class="loading-area" style="height: ${e.height};">\n                    <div class="loading">\n                        <div class="dot"></div>\n                        <div class="dot"></div>\n                        <div class="dot"></div>\n                        <div class="dot"></div>\n                        <div class="dot"></div>\n                    </div>\n                </div>`;t.find(".modal-body").html(o)}})),t.on("shown.bs.modal",(function(){e.url&&setTimeout((function(){t.find(".modal-body").html(`<iframe src="${e.url}" name="modal-frame" style="border: 0; width: 100%; height: ${e.height};"></iframe>`)}),500)})),t.modal("show")},hideModal:function(){$("#global-modal").modal("hide")},editor:function(o){ClassicEditor.create(o.target,{toolbar:{items:["heading","|","bold","italic","link","bulletedList","numberedList","fontColor","highlight","alignment","|","imageUpload","blockQuote","undo","redo","|","removeFormat"]},language:"zh-cn",image:{toolbar:["imageTextAlternative","imageStyle:full","imageStyle:side"]},table:{contentToolbar:["tableColumn","tableRow","mergeTableCells","tableCellProperties","tableProperties"]},simpleUpload:{uploadUrl:o.uploadUrl,withCredentials:!0,headers:{"X-CSRF-TOKEN":document.querySelector('meta[name="csrf-token"]').content}}}).then((o=>{window.editor=o})).catch((o=>{console.error("Oops, something went wrong!"),console.error("Please, report the following error on https://github.com/ckeditor/ckeditor5/issues with the build id and the error stack trace:"),console.warn("Build id: l0h4f81601ei-bp170a8jwug5"),console.error(o)}))},request:function(o){let e=$.extend({type:"post",data:"",multipart:!1,debug:!1,callback:null},o);$.ajax({url:e.url,type:e.type||"post",data:e.data,headers:{"X-CSRF-TOKEN":$('meta[name="csrf-token"]').attr("content")},contentType:!e.multipart&&"application/x-www-form-urlencoded",processData:!e.multipart,dataType:"json",success:function(o){1==e.debug&&console.log(o),e.callback&&e.callback(o)},error:function(o,t,l){1==e.debug&&(console.log(o),console.log(t),console.log(l)),e.callback&&e.callback(o.responseJSON)}})},reloadIFrame:function(o){let e=$.extend({icon:'<i class="bx bx-loader icon-spin"></i>',title:"",message:"数据加载中...",timeout:500,reloadUrl:null,callback:null},o),t=$("#main-content");$(t).block({message:`<span class="semibold">${e.icon} ${e.message}</span>`,timeout:e.timeout,overlayCSS:{backgroundColor:"#5A8DEE",opacity:.8,cursor:"wait"},css:{width:200,height:50,lineHeight:1,border:0,borderRadius:30,padding:15,color:"#5A8DEE",backgroundColor:"#F2F4F4"},onBlock:function(){console.log(e.reloadUrl),null==e.reloadUrl?document.getElementById("content-frame").contentWindow.location.reload(!0):document.getElementById("content-frame").src=e.reloadUrl,$.toast({title:e.title,message:"请稍后数据刷新"})}})},reloadModal:function(o){let e=$.extend({icon:'<i class="bx bx-loader icon-spin"></i>',title:"",message:"数据加载中...",timeout:500,reloadUrl:null,callback:null},o),t=parent.$("#global-modal .modal-content");$(t).block({message:`<span class="semibold">${e.icon} ${e.message}</span>`,timeout:e.timeout,overlayCSS:{backgroundColor:"#5A8DEE",opacity:.8,cursor:"wait"},css:{width:200,height:50,lineHeight:1,border:0,borderRadius:30,padding:15,color:"#5A8DEE",backgroundColor:"#F2F4F4"},onBlock:function(){console.log(e.reloadUrl),t.find("iframe").attr("src",e.reloadUrl),parent.$.toast({title:e.title,message:"请稍后数据刷新"})}})},confirm:function(o){let e=$.extend({text:"是否确认执行此操作？",showCancelButton:!0,confirmButtonColor:"#719DF0",cancelButtonColor:"#FF5B5C",confirmButtonText:"确认",confirmButtonClass:"btn btn-primary",cancelButtonText:"取消",cancelButtonClass:"btn btn-danger ml-1",buttonsStyling:!1,callback:null},o);Swal.fire({text:e.text,showCancelButton:e.showCancelButton,confirmButtonColor:e.confirmButtonColor,cancelButtonColor:e.cancelButtonColor,confirmButtonText:e.confirmButtonText,confirmButtonClass:e.confirmButtonClass,cancelButtonText:e.cancelButtonText,cancelButtonClass:e.cancelButtonClass,buttonsStyling:e.buttonsStyling}).then((function(o){o.value&&"function"==typeof e.callback&&e.callback()}))},checkedIds:function(){let o=$("input.check-opt:checked"),e="";return o.each((function(o){e+=0==o?$(this).val():","+$(this).val()})),e}}),$.fn.serializeObject=function(){var o={};return $.each(this.serializeArray(),(function(e,t){t.name in o||(o[t.name]=t.value)})),o};
